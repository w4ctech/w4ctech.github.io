(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{323:function(t,a,n){"use strict";n.r(a);var s=n(17),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"案例对比"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#案例对比","aria-hidden":"true"}},[t._v("#")]),t._v(" 案例对比")]),t._v(" "),n("blockquote",[n("p",[t._v("这是一个下载网络图片并且装载水印，然后显示到ImageView上的代码案例")])]),t._v(" "),n("h4",{attrs:{id:"抽取公用代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#抽取公用代码","aria-hidden":"true"}},[t._v("#")]),t._v(" 抽取公用代码")]),t._v(" "),n("pre",[n("code",[t._v('public class MainActivity extends AppCompatActivity {\n\n    private ImageView mImageView;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        mImageView = (ImageView) findViewById(R.id.image);\n    }\n\n\t// 给图片加水印的方法\n    private Bitmap createWatermark(Bitmap bitmap, String mark) {\n        int w = bitmap.getWidth();\n        int h = bitmap.getHeight();\n        Bitmap bmp = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);\n        Canvas canvas = new Canvas(bmp);\n        Paint p = new Paint();\n        // 水印颜色\n        p.setColor(Color.parseColor("#C5FF0000"));\n        // 水印字体大小\n        p.setTextSize(150);\n        //抗锯齿\n        p.setAntiAlias(true);\n        //绘制图像\n        canvas.drawBitmap(bitmap, 0, 0, p);\n        //绘制文字\n        canvas.drawText(mark, 0, h / 2, p);\n        canvas.save(Canvas.ALL_SAVE_FLAG);\n        canvas.restore();\n        return bmp;\n    }\n}\n')])]),t._v(" "),n("h4",{attrs:{id:"没用-rxjava-之前"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#没用-rxjava-之前","aria-hidden":"true"}},[t._v("#")]),t._v(" 没用 RxJava 之前")]),t._v(" "),n("pre",[n("code",[t._v('new Thread(new Runnable() {\n    @Override\n    public void run() {\n        try {\n            URL url = new URL("https://www.baidu.com/img/bd_logo1.png?where=super");\n            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();\n            InputStream inputStream = urlConnection.getInputStream();\n            Bitmap bitmap = BitmapFactory.decodeStream(inputStream);\n            // 加一个水印\n            bitmap = createWatermark(bitmap,"RxJava2.0");\n            // 显示到图片\n            Message message = Message.obtain();\n            message.obj = bitmap;\n            mHandler.sendMessage(message);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}).start();\n\nprivate Handler mHandler = new Handler(){\n    @Override\n    public void handleMessage(Message msg) {\n        Bitmap bitmap = (Bitmap) msg.obj;\n        mImageView.setImageBitmap(bitmap);\n    }\n};\n')])]),t._v(" "),n("h4",{attrs:{id:"使用-rxjava-之后"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-rxjava-之后","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用 RxJava 之后")]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("Observable"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("just"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://www.baidu.com/img/bd_logo1.png?where=super"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("map")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("new Function"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("String"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Bitmap"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("//")]),t._v(" 事件变换\n\n      @Override\n      public Bitmap "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("apply")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("@NonNull String urlPath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" throws Exception "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          URL url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" new URL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("urlPath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          HttpURLConnection urlConnection "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HttpURLConnection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("openConnection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          InputStream inputStream "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" urlConnection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getInputStream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          Bitmap bitmap "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" BitmapFactory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("decodeStream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inputStream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" bitmap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("map")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("new Function"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Bitmap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Bitmap"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n      @Override\n      public Bitmap "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("apply")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("@NonNull Bitmap bitmap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" throws Exception "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          bitmap "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" createWatermark"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bitmap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RxJava2.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" bitmap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subscribeOn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Schedulers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("observeOn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AndroidSchedulers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mainThread"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subscribe"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("new Consumer"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Bitmap"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n      @Override\n      public void accept"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Bitmap bitmap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" throws Exception "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          mImageView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setImageBitmap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bitmap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br")])]),n("h4",{attrs:{id:"rxjava-优势"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rxjava-优势","aria-hidden":"true"}},[t._v("#")]),t._v(" RxJava 优势")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("实现优雅：链式调用，一点到底")])]),t._v(" "),n("li",[n("p",[t._v("逻辑简洁：代码可读性高，解耦")])]),t._v(" "),n("li",[n("p",[t._v("使用简单：支持线程调度和各种操作符")])]),t._v(" "),n("li",[n("p",[t._v("扩展维护：随着程序逻辑的复杂性提高，它依然能够保持简洁和优雅")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);